"use strict";const e=require("vue"),T=require("../../../../node_modules/.pnpm/@element-plus_icons-vue@2.3.1_vue@3.5.6_typescript@5.6.2_/node_modules/@element-plus/icons-vue/dist/index.js"),i=require("element-plus"),z=["innerHTML"],H=["innerHTML","onClick"],E=["innerHTML"],L=["innerHTML","onClick"],N=e.defineComponent({name:"ZbListTable"}),M=e.defineComponent({...N,props:{tableOption:{default:()=>({multiple:!1,index:!0,hasPagination:!1,extraHeight:0,headerCellStyle:{color:"#555"}})},tableData:{default:()=>[]},tableList:{default:()=>[]},pageOption:{default:()=>({total:0,pageSize:20,pageNo:1,pageSizes:[10,20,30,50,100]})},styleObject:{},tableKey:{default:!0},showHeader:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},emits:["handleSizeChange","handleCurrentChange","handleSelectionChange","handleSortChange"],setup(C,{expose:b,emit:w}){const d=w,h=e.ref(),c=e.ref(500),p=e.ref([]);e.onMounted(()=>{s(),window.addEventListener("resize",s,{passive:!0})}),e.onUpdated(()=>{s()}),e.onUnmounted(()=>{window.removeEventListener("resize",s)});const o=C,g=(t,l)=>t(l),s=()=>{var l,r,u;let t=0;(l=o==null?void 0:o.tableOption)!=null&&l.maxHeight?t=(r=o==null?void 0:o.tableOption)==null?void 0:r.maxHeight:(t=window.innerHeight-(o.tableOption.hasPagination?147:80)-(((u=o.tableOption)==null?void 0:u.extraHeight)??0),t=Math.max(t,300)),c.value=t},m=t=>{d("handleSizeChange",t)},k=t=>{d("handleCurrentChange",t)},v=t=>{d("handleSelectionChange",t)},y=t=>{d("handleSortChange",t)},S=t=>{h.value.toggleRowSelection(t,!0)},x=()=>{h.value.clearSelection()};function O(t){return t+(o.pageOption.pageNo-1)*o.pageOption.pageSize+1}return e.watch(()=>o.tableData,async(t,l)=>{if(l==t){p.value=o.tableData;return}p.value=[],await e.nextTick(),p.value=o.tableData},{immediate:!0,deep:!0}),b({toggleRowSelection:S,clearSelection:x}),(t,l)=>{var f;const r=e.resolveComponent("el-tooltip"),u=e.resolveDirective("loading");return e.openBlock(),e.createElementBlock("div",{class:"list-table",style:e.normalizeStyle(o.styleObject)},[e.withDirectives((e.openBlock(),e.createBlock(e.unref(i.ElTable),{data:p.value,style:{width:"100%"},"header-cell-style":((f=o.tableOption)==null?void 0:f.headerCellStyle)??{color:"#555"},"max-height":c.value,ref_key:"tableRef",ref:h,onSelectionChange:v,onSortChange:y,key:t.tableKey,"show-header":o.showHeader,"row-key":t.tableOption.rowKey,border:t.tableOption.border},{default:e.withCtx(()=>[t.tableOption.multiple?(e.openBlock(),e.createBlock(e.unref(i.ElTableColumn),{key:0,type:"selection",width:"60","reserve-selection":t.tableOption.reserveSelection,fixed:!0},null,8,["reserve-selection"])):e.createCommentVNode("",!0),t.tableOption.index?(e.openBlock(),e.createBlock(e.unref(i.ElTableColumn),{key:1,type:"index",width:"50",fixed:!0,index:O})):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.tableList,n=>(e.openBlock(),e.createBlock(e.unref(i.ElTableColumn),{key:n.prop,label:n.label,prop:n.prop,width:n.width,"min-width":n.minWidth,align:n.alignRight?"right":"left","show-overflow-tooltip":n.tooltip,fixed:n.fixed,sortable:n.sortable??!1},e.createSlots({_:2},[n.headerToolTip?{name:"header",fn:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.label)+" ",1),e.createVNode(r,{placement:"top"},{content:e.withCtx(()=>[e.createElementVNode("div",{innerHTML:n.headerToolTip},null,8,z)]),default:e.withCtx(()=>[e.createVNode(e.unref(i.ElIcon),{size:"14"},{default:e.withCtx(()=>[e.createVNode(e.unref(T.QuestionFilled))]),_:1})]),_:2},1024)]),key:"0"}:void 0,n.format?{name:"default",fn:e.withCtx(a=>[n.designTooltipContentInFormat?(e.openBlock(),e.createBlock(r,{key:1,placement:"top",disabled:n.disabledTootip&&n.disabledTootip(a.row)},{content:e.withCtx(()=>[e.createElementVNode("div",{innerHTML:n.designTooltipContentInFormat},null,8,E)]),default:e.withCtx(()=>[e.createElementVNode("span",{innerHTML:g(n.format,a.row),onClick:B=>n.method?n.method(a.row):""},null,8,L)]),_:2},1032,["disabled"])):(e.openBlock(),e.createElementBlock("span",{key:0,innerHTML:g(n.format,a.row),onClick:B=>n.method?n.method(a.row):""},null,8,H))]),key:"1"}:void 0,n.vueComponent?{name:"default",fn:e.withCtx(a=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.vueComponent),{data:a.row,field:a.column,index:a.$index},null,8,["data","field","index"]))]),key:"2"}:void 0,n.slot?{name:"default",fn:e.withCtx(a=>[e.renderSlot(t.$slots,"slot",{data:a.row,field:a.column,index:a.$index},void 0,!0)]),key:"3"}:void 0]),1032,["label","prop","width","min-width","align","show-overflow-tooltip","fixed","sortable"]))),128)),t.tableOption.operateWidth?(e.openBlock(),e.createBlock(e.unref(i.ElTableColumn),{key:2,label:"操作",width:t.tableOption.operateWidth,fixed:t.tableOption.fixed},{default:e.withCtx(n=>[e.renderSlot(t.$slots,"operate",{data:n.row,field:n.column,index:n.$index},void 0,!0)]),_:3},8,["width","fixed"])):e.createCommentVNode("",!0)]),_:3},8,["data","header-cell-style","max-height","show-header","row-key","border"])),[[u,t.loading]]),t.tableOption.hasPagination?(e.openBlock(),e.createBlock(e.unref(i.ElPagination),{key:0,"current-page":t.pageOption.pageNo,"onUpdate:currentPage":l[0]||(l[0]=n=>t.pageOption.pageNo=n),"page-size":t.pageOption.pageSize,"onUpdate:pageSize":l[1]||(l[1]=n=>t.pageOption.pageSize=n),"page-sizes":t.pageOption.pageSizes,background:"",layout:"total, sizes, prev, pager, next, jumper",total:t.pageOption.total,onSizeChange:m,onCurrentChange:k},null,8,["current-page","page-size","page-sizes","total"])):e.createCommentVNode("",!0)],4)}}});module.exports=M;
